# Chapter 2. AWS(VPC & Internet Gateway & EC2)

---

## 🔍 미리 알아둬야 할 선행 내용

### ✅ 1. 서브넷, 서브넷마스크, 서브넷팅
#### 서브넷
- IP 주소에서 네트워크 영역을 부분적으로 나눈 부분 네트워크
#### 서브넷 마스크
- IP 주소 체계의 Newwork ID와 Host ID를 분리하는 역할
#### 서브넷팅
- IP 주소 낭비를 방지하기 위해 원본 네트워크를 여러개의 서브넷으로 분리하는 과정
- 서브넷팅 예제 : 211.100.10.1/24 네트워크를 각 서브넷당 55개의 Host를 할당할 수 있도록 서브넷팅 하자
    - 서브넷 마스크 : 26비트가 서브넷 마스크 이므로 255.255.255.192
    - 서브넷의 개수 : 4개(기존 Network ID를 나타내느 비트보다 2개 더 표현)

### ✅ 2 . 라우팅
#### 라우팅
- 목적지까지 데이터 또는 메세지를 체계적으로 다른 네트워크에 전달하는 경로 선택 그리고 스위칭 과정을 의미
#### 라우팅 테이블
- 목적지까지 갈 수 있는 모든 가능성있는 경로들 중에서 가장 효율적으로 판단되는 경로 정보를 모아 둔 공간

### ✅ 3. IP
#### IP
- 인터넷에 연결되어 있는 모든 장치들을 식별할 수 있도록 각각의 장비에게 부여되는 고유 주소
#### IPv4
- 전 세계적으로 사용된 첫 번째 인터넷 프로토콜이자, 32bit로 이루어진 주소 보유
#### IPv6
- 차세대 인터넷 프로토콜 주소이자, 128bit로 이루어진 주소 보유
#### 고정 IP, 유동 IP, 공인 IP, 사설 IP
- 고정 IP : 고정적으로 부여된 IP로 보안이 필요한 업체나 기관에서 사용
- 유동 IP : IP 주소를 임시로 발급해 주는 IP, 대부분의 사용자가 사용
- 공인 IP : 회사에 가입을 통해 IP를 제공받아 인터넷 사용
- 사설 IP : 내부적으로 사용되는 고유한 주소로 공유기에 연결되어 있는 가정이나 회사의 각 네트워크 기기에 할당
#### NAT
- IP패킷의 TCP/UCP 포트 숫자와 소스 및 목적지의 IP 주소 등을 재기록하면서 라우터를 통해 네트워크 트래픽을 주고 받는 기술
- 사용 이유 : 사설 네크워크(Private Network)에 속한 여러 개의 호스트가 하나의 공인 IP 주소를 사용하여 인터넷에 접속하기 위함


### ✅ 4. CIDR(Classless Inter-Domain Routing)
- 클래스 없는 도메인간 라우팅 기법
- AWS CIDR
    - 보통 IP주소 범위에는 2개를 제외하고 나머지를 사용하지만, AWS는 5개를 제외하고 해야한다(중요)!!

-------
-------

## 📗 본문 내용

### ✅ VPC
- VPC는 기본적으로 가상의 네트워크 영역 -> 사설 아이피 주소

### ✅ VPC의 실제 사용
- VPC 자체에서도 서브넷을 나눠 사용(단, VPC를 나눈 서브넷을 다시 나누지는 못함!)

- 유의점 : 총 5개의 아이피 주소를 호스트에 할당할 수 없다
    - 1.첫 주소 : 서브넷의 네트워크 대역
    - 2.두번쨰 : VPC 라우터에 할당(핵심!!)
    - 3.세번째 : Amazon이 제공되는 DNS에 할당
    - 4.미래를 위한 예약
    - 5.브로드 캐스트 주소

#### 오늘의 핵심 : VPC 내부적에는 라우터가 있고, 내부 서브넷끼리 통신이 되겠네?? (매우 중요!!!!! X 100) 

### ✅ VPC와 외부 통신

#### Public Subnet
- VPC 서브넷 중 외부와 통신이 원활하게 되는 서브넷 대역
- 서브넷이 외부와 통신 할 때, Internet Gateway를 거치게 하면 외부 통신 가능
    - 즉, 라우팅 테이블 설정을 통해 퍼블릭 서브넷으로 만든다!
- Destination : 10.0.0.0/16 + Target : Local
    - 목적지 : VPC 주소 = VPC로 들어올 때
    - Local : 내부 VPC 라우터가 알아서 잘 보내줄 것


#### Private Subnet
- 외부와 통신이 되지 않는 서브넷 대역

- ✏️ 사설 아이피 대역
    - 부족한 아이피 주소 문제 완화
    - 높은 보안성!!
    - 예시 : 공유기에만 공용 아이피 주소가 할당되고, 연결된 디바이스는 사설 아이피 대역을 받는다

- ❓ 2가지 의문점
    - 외부 통신이 안되는데, 데이터베이스 사용 방법은??
        - 답 : 같은 VPC에 배치(같은 VPC의 서브넷은 통신 가능)
    - 데이터베이스 원격 접속은 어떻게 하나??
        - 답 : 같은 VPC에 존재하는 Public Subnet 호스트의 도움 


### ✅ 보안 그룹
- 인스턴스 각각에 보안 설정을 할 수 있는 서비스(유사 방화벽)

### ✅ 탄력적 IP
- 아이피 주소를 고정하여 인스턴스가 종료된 후 다시 실행해도 주소 변경 X



